"use strict";function g(e,t){var o,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,n=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw n}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function m(e){var t,o="",r=g(e.tags);try{for(r.s();!(t=r.n()).done;)var n=t.value,o="".concat(o,'\n\t\t<div class="blog__tag blog__tag_').concat(n.tag.id,'"></div>')}catch(e){r.e(e)}finally{r.f()}var a=new Date(e.date),a='\n\t\t<div class="blog">\n\t\t\t<picture class="blog__img">\n\t\t\t\t<source srcset="'.concat(c).concat(e.mobilePhotoUrl,'" media="(max-width: 678px)">\n\t\t\t\t<source srcset="').concat(c).concat(e.tabletPhotoUrl,'" media="(max-width: 834px)">\n\t\t\t\t<img src="').concat(c).concat(e.desktopPhotoUrl,'" alt="main portfolio image">\n\t\t\t</picture>\n\t\t\t<div class="blog__content">\n\t\t\t\t<div class="blog__tags">').concat(o,'</div>\n\t\t\t\t<div class="blog__metadata">\n\t\t\t\t\t<div class="blog__item blog__item_data">').concat(a.getDate(),".").concat(a.getMonth()+1,".").concat(a.getFullYear(),'</div>\n\t\t\t\t\t<div class="blog__item blog__item_views">').concat(e.views,' views</div>\n\t\t\t\t\t<div class="blog__item blog__item_comments">').concat(e.commentsCount,' comments</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="blog__title">').concat(e.title,'</div>\n\t\t\t\t<div class="blog__text">').concat(e.text,'</div>\n\t\t\t\t<a href="#" class="blog__link">Go to this post</a>\n\t\t\t</div>\n\t\t</div>\n\t');u.insertAdjacentHTML("beforeend",a)}function p(){var e=document.querySelectorAll(".header button"),t=document.querySelectorAll(".menu-wrapper button"),o=document.querySelector(".profile-link"),r=document.querySelector(".menu-link");if(localStorage.getItem("token")&&localStorage.getItem("userId")){var n,a=g(e);try{for(a.s();!(n=a.n()).done;)n.value.classList.add("header__item_hide")}catch(e){a.e(e)}finally{a.f()}var c,l=g(t);try{for(l.s();!(c=l.n()).done;)c.value.classList.add("menu-wrapper__link_hide")}catch(e){l.e(e)}finally{l.f()}o.classList.remove("header__item_hide"),r.classList.remove("menu-wrapper__link_hide")}else{var u,s=g(e);try{for(s.s();!(u=s.n()).done;)u.value.classList.remove("header__item_hide")}catch(e){s.e(e)}finally{s.f()}var m,i=g(t);try{for(i.s();!(m=i.n()).done;)m.value.classList.remove("menu-wrapper__link_hide")}catch(e){i.e(e)}finally{i.f()}o.classList.add("header__item_hide"),r.classList.add("menu-wrapper__link_hide")}}function b(e,t,o){var r=document.createElement("div");"error"==o?r.classList.add("form__error"):"ok"==o&&r.classList.add("form__ok"),r.innerText=e,t.insertAdjacentElement("beforeend",r)}var a,k=/^((([0-9A-Za-z]{1}[\x2D\.0-9A-z]+[0-9A-Za-z]{1})|([0-9\u0410-\u044F]{1}[\x2D\.0-9\u0410-\u044F]+[0-9\u0410-\u044F]{1}))@([\x2DA-Za-z]+\.){1,2}[\x2DA-Za-z]{2,})$/,h="https://academy.directlinedev.com/api",c="https://academy.directlinedev.com",S=document.querySelector("body"),s=document.querySelectorAll(".header__item"),d=document.querySelector(".header__item_active"),f=document.querySelector(".menu-wrapper"),_=document.querySelector(".open-menu-wrapper"),v=document.querySelector(".menu-wrapper__close"),y=document.querySelectorAll(".register-button"),q=document.querySelectorAll(".sign-in-button"),L=document.querySelector(".footer__button"),w=document.querySelectorAll(".form"),A=document.querySelector(".sign-in"),I=document.querySelector(".register"),E=document.querySelector(".send-message"),i=document.querySelector(".form-settings"),C=document.querySelector(".form-settings__reset"),u=document.querySelector(".blogs__posts"),t=(p(),_.addEventListener("click",function(){f.classList.remove("menu-wrapper_close"),S.style.overflow="hidden"}),v.addEventListener("click",function(){f.classList.add("menu-wrapper_close"),S.style.overflow="auto"}),g(s));try{for(t.s();!(a=t.n()).done;){var x=a.value;x!=d&&(x.addEventListener("mouseenter",function(){d.style.color="#828282"}),x.addEventListener("mouseleave",function(){d.style.color="#070707"}))}}catch(e){t.e(e)}finally{t.f()}var T,o=g(q);try{for(o.s();!(T=o.n()).done;)T.value.addEventListener("click",function(){A.classList.remove("form_close"),S.style.overflow="hidden"})}catch(e){o.e(e)}finally{o.f()}var j,r=g(y);try{for(r.s();!(j=r.n()).done;)j.value.addEventListener("click",function(){I.classList.remove("form_close"),S.style.overflow="hidden"})}catch(e){r.e(e)}finally{r.f()}L.addEventListener("click",function(){E.classList.remove("form_close"),S.style.overflow="hidden"});var D,O=g(w);try{for(O.s();!(D=O.n()).done;)!function(){var e,v=D.value,y=v.querySelector(".form__main"),t=y.querySelector(".form__checkbox-label");y.querySelector(".form__close").addEventListener("click",function(){v.classList.add("form_close"),S.style.overflow="auto"}),t&&(e=y.querySelector(".form__submit"),t.addEventListener("click",function(){e.hasAttribute("disabled")?(e.removeAttribute("disabled"),e.classList.remove("form__submit_dis"),e.classList.add("form__submit_active")):(e.setAttribute("disabled",!0),e.classList.add("form__submit_dis"),e.classList.remove("form__submit_active"))})),y.addEventListener("submit",function(e){e.preventDefault();var u,n=y.querySelector(".form__submit"),t=!1,o=g(y.querySelectorAll(".form__item"));try{for(o.s();!(u=o.n()).done;){var r=u.value,a=r.querySelector(".form__input"),c=r.querySelector(".form__error"),m=k.test(a.value);a.classList.contains("form__input_required")&&""==a.value&&!c&&"email"!=a.name?(b("This field is required",r,"error"),a.classList.add("form__input_empty"),n.classList.add("form__submit_error"),t=!0):m||"email"!=a.name||!a.classList.contains("form__input_required")||c?(c&&""!=a.value&&"email"!=a.name||c&&m)&&(c.remove(),a.classList.remove("form__input_empty")):(b('Please enter a valid email address (your entry is not in the format "somebody@example.com")',r,"error"),a.classList.add("form__input_empty"),n.classList.add("form__submit_error")),c=r.querySelector(".form__error"),a.classList.contains("form__input_required")&&c&&(t=!0)}}catch(e){o.e(e)}finally{o.f()}if(t||n.classList.remove("form__submit_error"),!n.classList.contains("form__submit_error")){var d,e={},l={},s="/users",f="",i=g(y.querySelectorAll(".form__input"));try{for(i.s();!(d=i.n()).done;){var _=d.value;l[_.name]=_.value}}catch(e){i.e(e)}finally{i.f()}v.classList.contains("sign-in")?(f="login",s="/users/login",e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}):v.classList.contains("register")&&(f="register",s="/users",e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),v.classList.contains("send-message"),fetch("".concat(h).concat(s),e).then(function(e){return e.json()}).then(function(e){var t,e=e.data,o=("login"===f?(localStorage.setItem("token","".concat(e.token)),localStorage.setItem("userId","".concat(e.userId)),p()):console.log("OK"),g(y.querySelectorAll(".form__item")));try{for(o.s();!(t=o.n()).done;){var r=t.value;b("All right",r,"ok"),r.querySelector("input").classList.add("form__input_ok")}}catch(e){o.e(e)}finally{o.f()}n.classList.add("form__submit_ok"),setTimeout(function(){v.classList.add("form_close");var e,t=g(y.querySelectorAll(".form__item"));try{for(t.s();!(e=t.n()).done;){var o=e.value;o.querySelector(".form__ok").remove(),o.querySelector("input").classList.remove("form__input_ok")}}catch(e){t.e(e)}finally{t.f()}n.classList.remove("form__submit_ok"),S.style.overflow="auto"},2e3)}).catch(function(e){console.log(e)})}})}()}catch(e){O.e(e)}finally{O.f()}i.addEventListener("submit",function(e){e.preventDefault();var t,o,r=[],n={},a="",c="",l=g(i.querySelectorAll("input"));try{for(l.s();!(t=l.n()).done;){var s=t.value;switch(s.name){case"title":""!=s.value&&(n[s.name]=s.value);break;case"commentsCount":s.checked&&(n[s.name]=s.value,localStorage.setItem("commentsCount",s.id.charAt(s.id.length-1)));break;case"limit":s.checked&&(c="".concat(c,"&").concat(s.name,"=").concat(s.value),localStorage.setItem("limit",s.id.charAt(s.id.length-1)));break;case"sort":s.checked&&(c="".concat(c,"&").concat(s.name,'=["').concat(s.value,'","ASC"]'),localStorage.setItem("sort",s.id.charAt(s.id.length-1)));break;case"views":s.checked&&(n[s.name]=s.value,localStorage.setItem("views",s.id.charAt(s.id.length-1)));break;case"tags":s.checked&&r.push(s.value)}}}catch(e){l.e(e)}finally{l.f()}for(o in 0!=r.length&&(c="".concat(c,"&tags=[").concat(r,"]"),localStorage.setItem("tags",r.toString())),n)a="title"==o?"".concat(a,'"').concat(o,'":"').concat(n[o],'",'):"".concat(a,'"').concat(o,'":').concat(n[o],",");c=(0==c.length?"".concat(c,"filter={"):"".concat(c,"&filter={")).concat(a.slice(0,-1),"}"),e="".concat(h,"/posts?").concat(c);fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e=e.data;if(u.querySelector(".blog")){var t,o=g(u.querySelectorAll(".blog"));try{for(o.s();!(t=o.n()).done;)t.value.remove()}catch(e){o.e(e)}finally{o.f()}}var r,n=g(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;m(a)}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){console.log(e)})}),C.addEventListener("click",function(){var e,t=g(i.querySelectorAll("input"));try{for(t.s();!(e=t.n()).done;){var o=e.value;"text"!=o.type?o.checked=!1:o.value=""}}catch(e){t.e(e)}finally{t.f()}null!=localStorage.getItem("commentsCount")&&localStorage.removeItem("commentsCount"),null!=localStorage.getItem("limit")&&localStorage.removeItem("limit"),null!=localStorage.getItem("sort")&&localStorage.removeItem("sort"),null!=localStorage.getItem("views")&&localStorage.removeItem("views"),null!=localStorage.getItem("tags")&&localStorage.removeItem("tags"),fetch("".concat(h,"/posts"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e=e.data;if(u.querySelector(".blog")){var t,o=g(u.querySelectorAll(".blog"));try{for(o.s();!(t=o.n()).done;)t.value.remove()}catch(e){o.e(e)}finally{o.f()}}var r,n=g(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;m(a)}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){console.log(e)})});var P=[],z={},F="",e="";if(null!=localStorage.getItem("commentsCount")&&(document.querySelector("#form-settings__comments_".concat(localStorage.getItem("commentsCount"))).checked=!0),null!=localStorage.getItem("limit")&&(document.querySelector("#form-settings__show_".concat(localStorage.getItem("limit"))).checked=!0),null!=localStorage.getItem("sort")&&(document.querySelector("#form-settings__sort_".concat(localStorage.getItem("sort"))).checked=!0),null!=localStorage.getItem("views")&&(document.querySelector("#form-settings__views_".concat(localStorage.getItem("views"))).checked=!0),null!=localStorage.getItem("tags")){var G,U=g(localStorage.getItem("tags"));try{for(U.s();!(G=U.n()).done;){var Z=G.value;","!=Z&&(document.querySelector("#form-settings__tags_".concat(Z)).checked=!0)}}catch(e){U.e(e)}finally{U.f()}}var M,J,N=g(i.querySelectorAll("input"));try{for(N.s();!(M=N.n()).done;){var n=M.value;switch(n.name){case"commentsCount":n.checked&&(z[n.name]=n.value);break;case"limit":n.checked&&(e="".concat(e,"&").concat(n.name,"=").concat(n.value));break;case"sort":n.checked&&(e="".concat(e,"&").concat(n.name,'=["').concat(n.value,'","ASC"]'));break;case"views":n.checked&&(z[n.name]=n.value);break;case"tags":n.checked&&P.push(n.value)}}}catch(e){N.e(e)}finally{N.f()}for(J in 0!=P.length&&(e="".concat(e,"&tags=[").concat(P,"]")),z)F="".concat(F,'"').concat(J,'":').concat(z[J],",");e=(0==e.length?"".concat(e,"filter={"):"".concat(e,"&filter={")).concat(F.slice(0,-1),"}"),_="".concat(h,"/posts?").concat(e);fetch(_,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e=e.data;if(u.querySelector(".blog")){var t,o=g(u.querySelectorAll(".blog"));try{for(o.s();!(t=o.n()).done;)t.value.remove()}catch(e){o.e(e)}finally{o.f()}}var r,n=g(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;m(a)}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){console.log(e)});